{% include 'navbar.html' %}
{% load staticfiles %}
<!DOCTYPE html>
<html>


<body>
    <div class="container">
        <div class="row"><br>
{#            <div class="col-md-5  toppad  pull-right col-md-offset-3 ">#}
{#                <A href="edit.html" >Edit Profile</A>#}
{#                <A href="edit.html" >Logout</A>#}
{#                <br><p class=" text-info">May 05,2014,03:00 pm </p>#}
{#            </div>#}

            <script type="text/javascript"></script>
            <div class="col-xs-10 col-sm-10 col-md-10 col-lg-8 col-xs-offset-0 col-sm-offset-0 col-md-offset-3 col-lg-offset-3 toppad" >


                <div class="panel panel-primary">
                    <div class="panel-heading">
                    <h3 class="panel-title" id="profile_title">Hello</h3>
                    </div>

                    <div class="panel-body">
                    <div class="row">
                        <div class="col-md-3 col-lg-3 " align="center">
                            <img alt="User Pic" src="http://babyinfoforyou.com/wp-content/uploads/2014/10/avatar-300x300.png" class="img-circle img-responsive">
                        </div>

                    <!--<div class="col-xs-10 col-sm-10 hidden-md hidden-lg"> <br>
                    <dl>
                    <dt>DEPARTMENT:</dt>
                    <dd>Administrator</dd>
                    <dt>HIRE DATE</dt>
                    <dd>11/12/2013</dd>
                    <dt>DATE OF BIRTH</dt>
                    <dd>11/12/2013</dd>
                    <dt>GENDER</dt>
                    <dd>Male</dd>
                    </dl>
                    </div>-->
                        <div class=" col-md-9 col-lg-9 ">
                            <table class="table table-user-information">
                            <tbody>
                            <tr>
                            <td>First Name :</td>
                            <td id="profile_fname"></td>
                            </tr>
                            <tr>
                            <td>Last Name :</td>
                            <td id="profile_lname"></td>
                            </tr>
                            <tr>
                            <td>Age :</td>
                            <td id="profile_age"></td>
                            </tr>


                            <tr>
                            <td>Gender :</td>
                            <td id="profile_gender"></td>
                            </tr>

                            <tr>
                            <td>Street :</td>
                            <td id="profile_street"></td>
                            </tr>

                            <tr>
                            <td>City :</td>
                            <td id="profile_city"></td>
                            </tr>

                            <tr>
                            <td>State :</td>
                            <td id="profile_state"></td>
                            </tr>

                            <tr>
                            <td>Country :</td>
                            <td id="profile_country"></td>
                            </tr>

                            <tr>
                            <td>ZipCode :</td>
                            <td id="profile_zipcode"></td>
                            </tr>

                            <tr>
                            <td>Contact :</td>
                            <td id="profile_contact"></td>
                            </tr>

                            <tr>
                            <td>Profession :</td>
                            <td id="profile_profession"></td>
                            </tr>



                            </tbody>
                            </table>

                        <!--<a href="#" class="btn btn-primary">My Sales Performance</a>
                        <a href="#" class="btn btn-primary">Team Sales Performance</a>-->
                        </div>
                    </div>
                    </div>


                    <div class="panel-footer">
{#                    <a data-original-title="Broadcast Message" data-toggle="tooltip" type="button" class="btn btn-sm btn-primary"><i class="glyphicon glyphicon-envelope"></i></a>#}
{##}
{#                    <span class="pull-right">#}
{#                        <button class="btn btn-primary btn-sm" onclick='editprofile({{ user | safe }})' id="editprofile">Edit Profile</button>#}
{#                    </span>#}
                    </div>

                </div>
            </div>

        </div>
    </div>

    <script>

        function setprofile(user) {
            ////alert('Hello');
            ////alert(Object.keys(user));

            // Set the user profile attributes
            document.getElementById('profile_title').innerHTML = user['fname'] + " " + user['lname'] +"!";
            document.getElementById('profile_fname').innerHTML = user['fname'];
            document.getElementById('profile_lname').innerHTML = user['lname'];
            document.getElementById('profile_age').innerHTML = user['age'];
            if(user['gender'] == 'M') {
                document.getElementById('profile_gender').innerHTML = "Male";
            }
            else {
                document.getElementById('profile_gender').innerHTML = "Female";
            }

            document.getElementById('profile_street').innerHTML = user['street'];
            document.getElementById('profile_city').innerHTML = user['city'];
            document.getElementById('profile_state').innerHTML = user['state'];
            document.getElementById('profile_country').innerHTML = user['country'];
            document.getElementById('profile_zipcode').innerHTML = user['zipcode'];
            document.getElementById('profile_contact').innerHTML = user['contact'];
            if(user['profession']) {
                document.getElementById('profile_profession').innerHTML = user['profession'];
            }
            else {
                document.getElementById('profile_profession').innerHTML = "";
            }


        }

        setprofile({{ user|safe }})

        function editprofile(user) {
            ////alert("Hello");

            document.getElementById('profile_fname').innerHTML = "<input type='text' id='edit_fname' value='" + user['fname'] + "'></input>";
            document.getElementById('profile_lname').innerHTML = "<input type='text' id='edit_lname' value='" + user['lname'] + "'></input>";
            document.getElementById('profile_age').innerHTML = "<input type='text' id='edit_age' value='" + user['age'] + "'></input>";

            if(user['gender'] == 'M') {
                document.getElementById('profile_gender').innerHTML = '<div style="display: inline"><label style="display: inline">Male<input class="radio-inline"type="radio" name="gender" id="edit_gender" value="Male" checked style="width: 10%"></label> <label  style="display: inline">Female<input class="radio-inline"type="radio" name="gender" id="edit_gender" value="Female" style="width: 10%"></label> </div>';
            }
            else {
                document.getElementById('profile_gender').innerHTML = '<div style="display: inline"><label style="display: inline">Male<input class="radio-inline"type="radio" name="gender" id="edit_gender" value="Male" style="width: 10%"></label> <label  style="display: inline">Female<input class="radio-inline"type="radio" name="gender" id="edit_gender" value="Female" checked style="width: 10%"></label> </div>';

            }

            document.getElementById('profile_street').innerHTML = "<input type='text' id='edit_street' value='" + user['street'] + "'></input>";
            document.getElementById('profile_city').innerHTML = "<input type='text' id='edit_city' value='" + user['city'] + "'></input>";
            document.getElementById('profile_state').innerHTML = "<input type='text' id='edit_state' value='" + user['state'] + "'></input>";
            document.getElementById('profile_country').innerHTML = "<input type='text' id='edit_country' value='" + user['country'] + "'></input>";
            document.getElementById('profile_zipcode').innerHTML = "<input type='text' id='edit_zipcode' value='" + user['zipcode'] + "'></input>";
            document.getElementById('profile_contact').innerHTML = "<input type='text' id='edit_contact' value='" + user['contact'] + "'></input>";

            if(user['profession']) {
                document.getElementById('profile_profession').innerHTML = "<input type='text' id='edit_profession' value='" + user['profession'] + "'></input>";
            }
            else {
                document.getElementById('profile_profession').innerHTML = "<input type='text' id='edit_profession' value=''></input>";
            }

            document.getElementById('editprofile').innerHTML = "Submit";
            document.getElementById('editprofile').setAttribute("onclick","submitEditProfile()");
        }

        function submitEditProfile() {
            ////alert("HelloSubmit");

            var fname = document.getElementById('edit_fname').value;
            var lname = document.getElementById('edit_lname').value;
            var age = document.getElementById('edit_age').value;
            var gender = document.getElementById('edit_gender').value;
            var street = document.getElementById('edit_street').value;
            var city = document.getElementById('edit_city').value;
            var state = document.getElementById('edit_state').value;
            var country = document.getElementById('edit_country').value;
            var zipcode = document.getElementById('edit_zipcode').value;
            var contact = document.getElementById('edit_contact').value;
            var profession = document.getElementById('edit_profession').value;

            ////alert(gender);
            var editProfile = {'fname':fname,'lname':lname,'age':age,'gender':gender,'street':street,'city':city,'state':state,'country':country,'zipcode':zipcode,'contact':contact,'profession':profession};

            $.ajax({
                method: "POST",
                url: "/profile/",
                data: editProfile,
                dataType: 'json',
                "beforeSend": function(xhr, settings) {
                    console.log("Before Send");
                    $.ajaxSettings.beforeSend(xhr, settings);
                    //alert("Sending");
                },
                success: function(result){

                    ////alert("Back in profile");
                    location.reload();

                }
            });

        }

    </script>
</body>
</html>